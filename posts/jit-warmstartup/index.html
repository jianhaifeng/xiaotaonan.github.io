<!DOCTYPE html>
<html lang="en" dir="auto">

<head><meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="robots" content="index, follow">
<title>JIT and Tuning Warm-up | Blog</title>
<meta name="keywords" content="JIT, CRaC, AOT, WarmUp, Graal">
<meta name="description" content="Mainly introduces the applicable application scenarios of CRaC and its advantages over traditional CDS, AOT, and JIT-related startup acceleration solutions.">
<meta name="author" content="XiaotaoNAN">
<link rel="canonical" href="https://xiaotaonan.github.io/posts/jit-warmstartup/">
<link crossorigin="anonymous" href="/assets/css/stylesheet.5ff2630c4d1b3e25bc21f0ecd96681dbcf58219e741fa627857820b5485cb770.css" integrity="sha256-X/JjDE0bPiW8IfDs2WaB289YIZ50H6YnhXggtUhct3A=" rel="preload stylesheet" as="style">
<link rel="icon" href="https://xiaotaonan.github.io/favicon.ico">
<link rel="icon" type="image/png" sizes="16x16" href="https://xiaotaonan.github.io/favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="https://xiaotaonan.github.io/favicon-32x32.png">
<link rel="apple-touch-icon" href="https://xiaotaonan.github.io/apple-touch-icon.png">
<link rel="mask-icon" href="https://xiaotaonan.github.io/safari-pinned-tab.svg">
<meta name="theme-color" content="#2e2e33">
<meta name="msapplication-TileColor" content="#2e2e33">
<link rel="alternate" hreflang="en" href="https://xiaotaonan.github.io/posts/jit-warmstartup/">
<link rel="alternate" hreflang="cn" href="https://xiaotaonan.github.io/cn/posts/jit-warmstartup/">
<noscript>
    <style>
        #theme-toggle,
        .top-link {
            display: none;
        }

    </style>
    <style>
        @media (prefers-color-scheme: dark) {
            :root {
                --theme: rgb(29, 30, 32);
                --entry: rgb(46, 46, 51);
                --primary: rgb(218, 218, 219);
                --secondary: rgb(155, 156, 157);
                --tertiary: rgb(65, 66, 68);
                --content: rgb(196, 196, 197);
                --code-block-bg: rgb(46, 46, 51);
                --code-bg: rgb(55, 56, 62);
                --border: rgb(51, 51, 51);
            }

            .list {
                background: var(--theme);
            }

            .list:not(.dark)::-webkit-scrollbar-track {
                background: 0 0;
            }

            .list:not(.dark)::-webkit-scrollbar-thumb {
                border-color: var(--theme);
            }
        }

    </style>
</noscript><meta property="og:title" content="JIT and Tuning Warm-up" />
<meta property="og:description" content="Mainly introduces the applicable application scenarios of CRaC and its advantages over traditional CDS, AOT, and JIT-related startup acceleration solutions." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://xiaotaonan.github.io/posts/jit-warmstartup/" />
<meta property="og:image" content="https://xiaotaonan.github.io/images/en/jitwarmup/0.png" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2024-01-23T00:00:00+00:00" />
<meta property="article:modified_time" content="2024-01-23T00:00:00+00:00" />
<meta property="og:see_also" content="https://xiaotaonan.github.io/posts/crac41/" />


<meta name="twitter:card" content="summary_large_image" />
<meta name="twitter:image" content="https://xiaotaonan.github.io/images/en/jitwarmup/0.png" />
<meta name="twitter:title" content="JIT and Tuning Warm-up"/>
<meta name="twitter:description" content="Mainly introduces the applicable application scenarios of CRaC and its advantages over traditional CDS, AOT, and JIT-related startup acceleration solutions."/>


<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BreadcrumbList",
  "itemListElement": [
    {
      "@type": "ListItem",
      "position":  1 ,
      "name": "Posts",
      "item": "https://xiaotaonan.github.io/posts/"
    }, 
    {
      "@type": "ListItem",
      "position":  2 ,
      "name": "JIT and Tuning Warm-up",
      "item": "https://xiaotaonan.github.io/posts/jit-warmstartup/"
    }
  ]
}
</script>
<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BlogPosting",
  "headline": "JIT and Tuning Warm-up",
  "name": "JIT and Tuning Warm-up",
  "description": "Mainly introduces the applicable application scenarios of CRaC and its advantages over traditional CDS, AOT, and JIT-related startup acceleration solutions.",
  "keywords": [
    "JIT", "CRaC", "AOT", "WarmUp", "Graal"
  ],
  "articleBody": "0.Preface 0.1.Java Program Execution Process 0.2.Compilation Is Fast Or Slow？ 0.2.1.Java Virtual Machine (Interpreted is relatively slow) 0.2.2.Just In Time Compiler (relatively fast) 0.2.3.Java Compiler (relatively fast) Eg: Graal compiler (can be used as an AOT compiler and can replace C2 in the JIT compiler), AOT (jaotc)\n1.JIT Compilation Process After the Java application is started, after class loading and bytecode verification are completed, the JIT compiler will not be triggered immediately for compilation, but will be interpreted and analyzed by the real-time interpreter first; After the just-in-time interpreter completes the preliminary interpretation and analysis, the JIT compiler will use the analysis information that has been collected to find hot spots (frequently executed code parts). Once the hot spot codes are available, C1 can Conduct analysis and compile and generate relatively efficient target machine code based on the analysis results, so that the Java virtual machine at this time has the code performance of the native machine. At the same time, C1 will also perform further analysis; After C1 completes further analysis, C2 will use the analysis information generated by C1 to perform more aggressive and time-consuming optimization. At this time, C2 will recompile the code to generate more efficient target machine code, thereby making it more efficient. Significantly improve the code performance of Java virtual machine. In summary, based on more information about hotspots, C1 performance improves faster, while C2 performance improves better. 2.Current Needs Azul can preheat in the simulation environment (simulate hotspot methods and loop bodies), then inject the results into the production environment, and compile directly using C2 to reduce the compilation time at runtime. This is very effective for scenarios such as securities industry quotations, because these scenarios require high-speed operation from the beginning.\nHorizontal axis: the time when the JVM virtual machine reaches the best code performance; Vertical axis: JVM’s best code performance degree or ratio; Glitches: caused by de-optimization or garbage collection. 3.Question Azul can learn and train in a simulation environment, and then input the training result set as a reference into the production environment to achieve the peak effect at startup. And eliminate GC glitches.\n3.1.Current Issues Long startup time; It takes a long time for the Java Virtual Machine to reach the optimal code performance of the Java Virtual Machine. 3.2.Desired Results Short startup time; After startup, the Java virtual machine can quickly achieve optimal code performance. 3.3.Desired Goals On the premise of ensuring the correct use of key functions, significantly reduce the time it takes to restart; Eliminate glitches and enable the Java virtual machine to quickly achieve optimal code performance. 4.Problem Analysis 4.1.What are the current plans to accelerate the start-up? 4.1.1.CDS (Class Data Sharing) Functional positioning: Dump internal classes, application classes, dynamic (classes loaded by custom class loader and omit the dump classlist step) and other representations into files (class loader, jsa file); Shared (CDS) on each JVM startup. Insufficient: No optimization or hotspot detection; Only class loading time is reduced; The startup speed is not significantly accelerated.\n4.1.2.AOT (Ahead Of Time Compilation, compilation in advance, source code to machine code) Advantage: “Full speed” from the start, GraalVM native images can do this; By definition, AOT is static, code is compiled before running, and there is no overhead in compiling code at runtime; Small memory footprint\nInsufficient: Does not interpret bytecode; There is no hotspot analysis; There is no runtime compilation of code, so no runtime bytecode generation; Limited use of method inlining; Reflection is possible but complicated; Cannot use speculative optimization (assuming conditions hold, such as array bounds) Must be compiled for common characteristics (e.g. same name, same parameters, etc.) Because optimization is not thorough, overall performance is usually lower; Deploy the environment! = development environment.\n4.1.3.JIT (Just In Time Compilation, instant compilation) advantage: Aggressive method inlining can be used at runtime (for example, the number of method lines does not exceed 80 lines, aggressive refers to large methods, long compilation time, and large binary files) Can be generated using runtime bytecode Reflection is simple Can speculative optimization be used? (assuming conditions hold, such as array bounds) It can even be optimized for Haswell, Skylake, Ice Lake, and more. (CPU architecture) Overall performance is usually higher Deployment environment == development environment\ninsufficient: Takes more time to start (but will be faster) There is an overhead in compiling code at runtime Larger memory footprint\n4.2.Why glitches occur (the existence of glitches directly affects the optimal performance of the Java virtual machine)？ 4.2.1.De-optimization Although C2-compiled code is highly optimized and long-lived, it can also be de-optimized. As a result, the JVM will temporarily roll back to the interpreted state. De-optimization occurs when the compiler’s optimistic assumptions prove to be wrong - for example, when profile information does not match method behavior, the JVM de-optimizes compiled and inlined code as soon as the hot path changes .\n4.2.2.There are GC operations before reaching optimal performance 5.Solutions 5.1.(Commercial fee)Azul Prime ReadyNow 5.1.1.What is Azul Prime ReadyNow? ReadyNow is a feature of Azul Platform Prime that, when enabled, significantly improves application warm-up behavior.\n5.1.2.What is preheating? Warm-up refers to the time required for a Java application to reach optimal performance. The just-in-time (JIT) compiler’s job is to provide optimal performance by generating optimized compiled code from application bytecode. This process takes some time as the JIT compiler looks for optimization opportunities based on analysis of the application.\n5.1.3.The basic idea ReadyNow retains profiling information collected during an application’s run so that subsequent runs do not have to learn from scratch again. Warming up improves the operation of each application until peak performance is achieved.\n5.1.4.Instructions To enable ReadyNow, add the following command line options, which are usually the same for both: ● -XX:ProfileLogIn= instructs Azul Platform Prime to use information from the existing profile log. ● -XX:ProfileLogOut= records previous compilation and runtime de-optimization decisions. Running the application will automatically generate or update the profile log. This profile log will be used on subsequent runs of the application, improving warm-up.\n5.1.5.Integrated development Closed source\n5.2.(Open Source Free)CRaC 5.2.1.What is CRaC? Referenced to CRIU (Checkpoint Restore In Userspace, checkpoint recovery in user space) The CRaC (Coordinated Restore at Checkpoint) project studies the coordination of Java programs and mechanisms for checkpointing (making mirrors and snapshots) of Java instances during execution. Restoring from an image can resolve some issues with boot and warm-up times. The main goal of this project is to develop a new mechanism-agnostic standard API to inform Java programs about checkpoint and recovery events. Other research activities will include, but are not limited to, integration with existing checkpoint/recovery mechanisms and the development of new mechanisms, changes to the JVM and JDK to shrink images and ensure they are correct.\n5.2.2.The basic idea Input data (simulated request) to a Java application running in a specific (canary) environment (CPU, memory, I/O, operating system, etc.). When the input data reaches saturation (the requested path covers all use case), freeze the running application, output the checkpoint of the Java virtual machine to achieve optimal performance as a snapshot file and save it. Later, the application can be started through the previously saved image file (theoretically it can be a different physical machine).\n5.2.3.Deployment process Initiate simulated requests to applications running in the canary environment, generate snapshot files when saturated requests are reached, and then restore the application through the snapshot files in the production environment.\n5.2.4.Instructions To enable CRaC, add the following command line options, which are usually the same for both: ● -XX:CRaCRestoreFrom=cr instructs the JDK to use the information in the existing configuration file log. ● -XX:CRaCCheckpointTo=cr records previous compilation and running de-optimization decisions.\n5.2.5.Integrated development 5.2.5.1.Get source code git clone https://github.com/openjdk/crac.git -b {tag} 5.2.5.2.Manual compilation bash configure make images mv build/linux-x86_64-server-release/images/jdk/ . 5.2.5.3.Download the compatible CRIU CRIU\n5.2.5.3.Extract and copy the criu binary on the same named file in the JDK cp criu-dist/sbin/criu jdk/lib/criu 5.2.5.4.Execute authorization sudo chown root:root jdk/lib/criu sudo chmod u+s jdk/lib/criu 6.Verify 6.1.Official verification 6.1.1.Verification environment Laptop (Intel i7-5500U, 16Gb RAM and SSD.) Operating system kernel (Linux kernel 5.7.4-arch1-1) Operating system (ubuntu:18.04 based image) Platform: archlinux\n6.1.2.Verification scenario 6.1.2.1.Scenario 1: Time To First Operation 6.1.2.2.Scenario 2: Time to Complete N operations:sprint-boot(OpenJDK ON/OFF CRaC) 6.1.2.3.Scenario 3: Time to Complete N operations:quarkus(OpenJDK ON/OFF CRaC) 6.1.2.4.Scenario 4: Time to Complete N operations:micronaut(OpenJDK ON/OFF CRaC) 6.2.Local verification 6.2.1.Verification environment Laptop (3.1 GHz Intel Core i5, 4Gb RAM and 50Gb SSD.) Operating system kernel (3.10.0-1160.102.1.el7.x86_64) Operating system (CentOS:7.9 VM) Platform: x86_64\n6.2.2.Verification scenario 6.2.2.1.Scenario 1: Time Of First Operation 6.2.2.2.Scenario 2: Time To Complete 100000 Operations ",
  "wordCount" : "1421",
  "inLanguage": "en",
  "image":"https://xiaotaonan.github.io/images/en/jitwarmup/0.png","datePublished": "2024-01-23T00:00:00Z",
  "dateModified": "2024-01-23T00:00:00Z",
  "author":{
    "@type": "Person",
    "name": "XiaotaoNAN"
  },
  "mainEntityOfPage": {
    "@type": "WebPage",
    "@id": "https://xiaotaonan.github.io/posts/jit-warmstartup/"
  },
  "publisher": {
    "@type": "Organization",
    "name": "Blog",
    "logo": {
      "@type": "ImageObject",
      "url": "https://xiaotaonan.github.io/favicon.ico"
    }
  }
}
</script>
</head>

<body class="" id="top">
<script>
    if (localStorage.getItem("pref-theme") === "dark") {
        document.body.classList.add('dark');
    } else if (localStorage.getItem("pref-theme") === "light") {
        document.body.classList.remove('dark')
    } else if (window.matchMedia('(prefers-color-scheme: dark)').matches) {
        document.body.classList.add('dark');
    }

</script>

<header class="header">
    <nav class="nav">
        <div class="logo">
            <a href="https://xiaotaonan.github.io/" accesskey="h" title="Blog (Alt + H)">Blog</a>
            <div class="logo-switches">
                <button id="theme-toggle" accesskey="t" title="(Alt + T)">
                    <svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24"
                        fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round">
                        <path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"></path>
                    </svg>
                    <svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24"
                        fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round">
                        <circle cx="12" cy="12" r="5"></circle>
                        <line x1="12" y1="1" x2="12" y2="3"></line>
                        <line x1="12" y1="21" x2="12" y2="23"></line>
                        <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
                        <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
                        <line x1="1" y1="12" x2="3" y2="12"></line>
                        <line x1="21" y1="12" x2="23" y2="12"></line>
                        <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
                        <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
                    </svg>
                </button>
                <ul class="lang-switch"><li>|</li>
                    <li>
                        <a href="https://xiaotaonan.github.io/cn/" title="中文"
                            aria-label=":cn:">🇨🇳</a>
                    </li>
                </ul>
            </div>
        </div>
        <ul id="menu">
            <li>
                <a href="https://xiaotaonan.github.io/archives" title="Archive">
                    <span>Archive</span>
                </a>
            </li>
            <li>
                <a href="https://xiaotaonan.github.io/search/" title="Search (Alt &#43; /)" accesskey=/>
                    <span>Search</span>
                </a>
            </li>
            <li>
                <a href="https://xiaotaonan.github.io/tags/" title="Tags">
                    <span>Tags</span>
                </a>
            </li>
            <li>
                <a href="https://github.com/xiaotaonan/xiaotaonan.github.io/wiki" title="WiKi">
                    <span>WiKi</span>&nbsp;
                    <svg fill="none" shape-rendering="geometricPrecision" stroke="currentColor" stroke-linecap="round"
                        stroke-linejoin="round" stroke-width="2.5" viewBox="0 0 24 24" height="12" width="12">
                        <path d="M18 13v6a2 2 0 01-2 2H5a2 2 0 01-2-2V8a2 2 0 012-2h6"></path>
                        <path d="M15 3h6v6"></path>
                        <path d="M10 14L21 3"></path>
                    </svg>
                </a>
            </li>
        </ul>
    </nav>
</header>
<main class="main">

<article class="post-single">
  <header class="post-header">
    <div class="breadcrumbs"><a href="https://xiaotaonan.github.io/">Home</a>&nbsp;»&nbsp;<a href="https://xiaotaonan.github.io/posts/">Posts</a></div>
    <h1 class="post-title entry-hint-parent">
      JIT and Tuning Warm-up
    </h1>
    <div class="post-description">
      Mainly introduces the applicable application scenarios of CRaC and its advantages over traditional CDS, AOT, and JIT-related startup acceleration solutions.
    </div>
    <div class="post-meta"><span title='2024-01-23 00:00:00 +0000 UTC'>January 23, 2024</span>&nbsp;·&nbsp;7 min&nbsp;·&nbsp;XiaotaoNAN&nbsp;|&nbsp;Translations:
<ul class="i18n_list">
    <li>
        <a href="https://xiaotaonan.github.io/cn/posts/jit-warmstartup/">🇨🇳</a>
    </li>
</ul>&nbsp;|&nbsp;<a href="https://github.com/xiaotaonan/xiaotaonan.github.io/tree/exampleSite/content/posts/jit-warmstartup.md" rel="noopener noreferrer" target="_blank">Suggest Changes</a>

</div>
  </header> 
<figure class="entry-cover"><img loading="eager" src="https://xiaotaonan.github.io/images/en/jitwarmup/0.png" alt=" Java application life cycle-JVM perspective">
        <p>Java application life cycle-JVM perspective</p>
</figure><div class="toc">
    <details  open>
        <summary accesskey="c" title="(Alt + C)">
            <span class="details">Table of Contents</span>
        </summary>

        <div class="inner"><ul>
                <li>
                    <a href="#0preface" aria-label="0.Preface">0.Preface</a><ul>
                        
                <li>
                    <a href="#01java-program-execution-process" aria-label="0.1.Java Program Execution Process">0.1.Java Program Execution Process</a></li>
                <li>
                    <a href="#02compilation-is-fast-or-slow" aria-label="0.2.Compilation Is Fast Or Slow？">0.2.Compilation Is Fast Or Slow？</a><ul>
                        
                <li>
                    <a href="#021java-virtual-machine-interpreted-is-relatively-slow" aria-label="0.2.1.Java Virtual Machine (Interpreted is relatively slow)">0.2.1.Java Virtual Machine (Interpreted is relatively slow)</a></li>
                <li>
                    <a href="#022just-in-time-compiler-relatively-fast" aria-label="0.2.2.Just In Time Compiler (relatively fast)">0.2.2.Just In Time Compiler (relatively fast)</a></li>
                <li>
                    <a href="#023java-compiler-relatively-fast" aria-label="0.2.3.Java Compiler (relatively fast)">0.2.3.Java Compiler (relatively fast)</a></li></ul>
                </li></ul>
                </li>
                <li>
                    <a href="#1jit-compilation-process" aria-label="1.JIT Compilation Process">1.JIT Compilation Process</a></li>
                <li>
                    <a href="#2current-needs" aria-label="2.Current Needs">2.Current Needs</a></li>
                <li>
                    <a href="#3question" aria-label="3.Question">3.Question</a><ul>
                        
                <li>
                    <a href="#31current-issues" aria-label="3.1.Current Issues">3.1.Current Issues</a></li>
                <li>
                    <a href="#32desired-results" aria-label="3.2.Desired Results">3.2.Desired Results</a></li>
                <li>
                    <a href="#33desired-goals" aria-label="3.3.Desired Goals">3.3.Desired Goals</a></li></ul>
                </li>
                <li>
                    <a href="#4problem-analysis" aria-label="4.Problem Analysis">4.Problem Analysis</a><ul>
                        
                <li>
                    <a href="#41what-are-the-current-plans-to-accelerate-the-start-up" aria-label="4.1.What are the current plans to accelerate the start-up?">4.1.What are the current plans to accelerate the start-up?</a><ul>
                        
                <li>
                    <a href="#411cds-class-data-sharing" aria-label="4.1.1.CDS (Class Data Sharing)">4.1.1.CDS (Class Data Sharing)</a></li>
                <li>
                    <a href="#412aot-ahead-of-time-compilation-compilation-in-advance-source-code-to-machine-code" aria-label="4.1.2.AOT (Ahead Of Time Compilation, compilation in advance, source code to machine code)">4.1.2.AOT (Ahead Of Time Compilation, compilation in advance, source code to machine code)</a></li>
                <li>
                    <a href="#413jit-just-in-time-compilation-instant-compilation" aria-label="4.1.3.JIT (Just In Time Compilation, instant compilation)">4.1.3.JIT (Just In Time Compilation, instant compilation)</a></li></ul>
                </li>
                <li>
                    <a href="#42why-glitches-occur-the-existence-of-glitches-directly-affects-the-optimal-performance-of-the-java-virtual-machine" aria-label="4.2.Why glitches occur (the existence of glitches directly affects the optimal performance of the Java virtual machine)？">4.2.Why glitches occur (the existence of glitches directly affects the optimal performance of the Java virtual machine)？</a><ul>
                        
                <li>
                    <a href="#421de-optimization" aria-label="4.2.1.De-optimization">4.2.1.De-optimization</a></li>
                <li>
                    <a href="#422there-are-gc-operations-before-reaching-optimal-performance" aria-label="4.2.2.There are GC operations before reaching optimal performance">4.2.2.There are GC operations before reaching optimal performance</a></li></ul>
                </li></ul>
                </li>
                <li>
                    <a href="#5solutions" aria-label="5.Solutions">5.Solutions</a><ul>
                        
                <li>
                    <a href="#51commercial-feeazul-prime-readynow" aria-label="5.1.(Commercial fee)Azul Prime ReadyNow">5.1.(Commercial fee)Azul Prime ReadyNow</a><ul>
                        
                <li>
                    <a href="#511what-is-azul-prime-readynow" aria-label="5.1.1.What is Azul Prime ReadyNow?">5.1.1.What is Azul Prime ReadyNow?</a></li>
                <li>
                    <a href="#512what-is-preheating" aria-label="5.1.2.What is preheating?">5.1.2.What is preheating?</a></li>
                <li>
                    <a href="#513the-basic-idea" aria-label="5.1.3.The basic idea">5.1.3.The basic idea</a></li>
                <li>
                    <a href="#514instructions" aria-label="5.1.4.Instructions">5.1.4.Instructions</a></li>
                <li>
                    <a href="#515integrated-development" aria-label="5.1.5.Integrated development">5.1.5.Integrated development</a></li></ul>
                </li>
                <li>
                    <a href="#52open-source-freecrac" aria-label="5.2.(Open Source Free)CRaC">5.2.(Open Source Free)CRaC</a><ul>
                        
                <li>
                    <a href="#521what-is-crac" aria-label="5.2.1.What is CRaC?">5.2.1.What is CRaC?</a></li>
                <li>
                    <a href="#522the-basic-idea" aria-label="5.2.2.The basic idea">5.2.2.The basic idea</a></li>
                <li>
                    <a href="#523deployment-process" aria-label="5.2.3.Deployment process">5.2.3.Deployment process</a></li>
                <li>
                    <a href="#524instructions" aria-label="5.2.4.Instructions">5.2.4.Instructions</a></li>
                <li>
                    <a href="#525integrated-development" aria-label="5.2.5.Integrated development">5.2.5.Integrated development</a><ul>
                        
                <li>
                    <a href="#5251get-source-code" aria-label="5.2.5.1.Get source code">5.2.5.1.Get source code</a></li>
                <li>
                    <a href="#5252manual-compilation" aria-label="5.2.5.2.Manual compilation">5.2.5.2.Manual compilation</a></li>
                <li>
                    <a href="#5253download-the-compatible-criu" aria-label="5.2.5.3.Download the compatible CRIU">5.2.5.3.Download the compatible CRIU</a></li>
                <li>
                    <a href="#5253extract-and-copy-the-criu-binary-on-the-same-named-file-in-the-jdk" aria-label="5.2.5.3.Extract and copy the criu binary on the same named file in the JDK">5.2.5.3.Extract and copy the criu binary on the same named file in the JDK</a></li>
                <li>
                    <a href="#5254execute-authorization" aria-label="5.2.5.4.Execute authorization">5.2.5.4.Execute authorization</a></li></ul>
                </li></ul>
                </li></ul>
                </li>
                <li>
                    <a href="#6verify" aria-label="6.Verify">6.Verify</a><ul>
                        
                <li>
                    <a href="#61official-verification" aria-label="6.1.Official verification">6.1.Official verification</a><ul>
                        
                <li>
                    <a href="#611verification-environment" aria-label="6.1.1.Verification environment">6.1.1.Verification environment</a></li>
                <li>
                    <a href="#612verification-scenario" aria-label="6.1.2.Verification scenario">6.1.2.Verification scenario</a><ul>
                        
                <li>
                    <a href="#6121scenario-1-time-to-first-operation" aria-label="6.1.2.1.Scenario 1: Time To First Operation">6.1.2.1.Scenario 1: Time To First Operation</a></li>
                <li>
                    <a href="#6122scenario-2-time-to-complete-n-operationssprint-bootopenjdk-onoff-crac" aria-label="6.1.2.2.Scenario 2: Time to Complete N operations:sprint-boot(OpenJDK ON/OFF CRaC)">6.1.2.2.Scenario 2: Time to Complete N operations:sprint-boot(OpenJDK ON/OFF CRaC)</a></li>
                <li>
                    <a href="#6123scenario-3-time-to-complete-n-operationsquarkusopenjdk-onoff-crac" aria-label="6.1.2.3.Scenario 3: Time to Complete N operations:quarkus(OpenJDK ON/OFF CRaC)">6.1.2.3.Scenario 3: Time to Complete N operations:quarkus(OpenJDK ON/OFF CRaC)</a></li>
                <li>
                    <a href="#6124scenario-4-time-to-complete-n-operationsmicronautopenjdk-onoff-crac" aria-label="6.1.2.4.Scenario 4: Time to Complete N operations:micronaut(OpenJDK ON/OFF CRaC)">6.1.2.4.Scenario 4: Time to Complete N operations:micronaut(OpenJDK ON/OFF CRaC)</a></li></ul>
                </li></ul>
                </li>
                <li>
                    <a href="#62local-verification" aria-label="6.2.Local verification">6.2.Local verification</a><ul>
                        
                <li>
                    <a href="#621verification-environment" aria-label="6.2.1.Verification environment">6.2.1.Verification environment</a></li>
                <li>
                    <a href="#622verification-scenario" aria-label="6.2.2.Verification scenario">6.2.2.Verification scenario</a><ul>
                        
                <li>
                    <a href="#6221scenario-1-time-of-first-operation" aria-label="6.2.2.1.Scenario 1: Time Of First Operation">6.2.2.1.Scenario 1: Time Of First Operation</a></li>
                <li>
                    <a href="#6222scenario-2-time-to-complete-100000-operations" aria-label="6.2.2.2.Scenario 2: Time To Complete 100000 Operations">6.2.2.2.Scenario 2: Time To Complete 100000 Operations</a>
                </li>
            </ul>
            </li>
            </ul>
            </li>
            </ul>
            </li>
            </ul>
        </div>
    </details>
</div>

  <div class="post-content"><h1 id="0preface">0.Preface<a hidden class="anchor" aria-hidden="true" href="#0preface">#</a></h1>
<p><img src="/images/en/jitwarmup/0.png"/><br></p>
<p><img src="/images/en/jitwarmup/0-0.png"/><br></p>
<p><img src="/images/en/jitwarmup/0-1.png"/><br></p>
<p><img src="/images/en/jitwarmup/0-2.png"/><br></p>
<p><img src="/images/en/jitwarmup/0-3.png"/><br></p>
<h2 id="01java-program-execution-process">0.1.Java Program Execution Process<a hidden class="anchor" aria-hidden="true" href="#01java-program-execution-process">#</a></h2>
<h2 id="02compilation-is-fast-or-slow">0.2.Compilation Is Fast Or Slow？<a hidden class="anchor" aria-hidden="true" href="#02compilation-is-fast-or-slow">#</a></h2>
<h3 id="021java-virtual-machine-interpreted-is-relatively-slow">0.2.1.Java Virtual Machine (Interpreted is relatively slow)<a hidden class="anchor" aria-hidden="true" href="#021java-virtual-machine-interpreted-is-relatively-slow">#</a></h3>
<img src="/images/en/jitwarmup/0-4.png"/>
<h3 id="022just-in-time-compiler-relatively-fast">0.2.2.Just In Time Compiler (relatively fast)<a hidden class="anchor" aria-hidden="true" href="#022just-in-time-compiler-relatively-fast">#</a></h3>
<img src="/images/en/jitwarmup/0-5.png"/>
<h3 id="023java-compiler-relatively-fast">0.2.3.Java Compiler (relatively fast)<a hidden class="anchor" aria-hidden="true" href="#023java-compiler-relatively-fast">#</a></h3>
<p><img src="/images/en/jitwarmup/0-6.png"/><br></p>
<p>Eg: Graal compiler (can be used as an AOT compiler and can replace C2 in the JIT compiler), AOT (jaotc)</p>
<h1 id="1jit-compilation-process">1.JIT Compilation Process<a hidden class="anchor" aria-hidden="true" href="#1jit-compilation-process">#</a></h1>
<p><img src="/images/en/jitwarmup/1-0.png"/><br></p>
<ol>
<li>After the Java application is started, after class loading and bytecode verification are completed, the JIT compiler will not be triggered immediately for compilation, but will be interpreted and analyzed by the real-time interpreter first;</li>
<li>After the just-in-time interpreter completes the preliminary interpretation and analysis, the JIT compiler will use the analysis information that has been collected to find hot spots (frequently executed code parts). Once the hot spot codes are available, C1 can Conduct analysis and compile and generate relatively efficient target machine code based on the analysis results, so that the Java virtual machine at this time has the code performance of the native machine. At the same time, C1 will also perform further analysis;</li>
<li>After C1 completes further analysis, C2 will use the analysis information generated by C1 to perform more aggressive and time-consuming optimization. At this time, C2 will recompile the code to generate more efficient target machine code, thereby making it more efficient. Significantly improve the code performance of Java virtual machine.</li>
<li>In summary, based on more information about hotspots, C1 performance improves faster, while C2 performance improves better.</li>
</ol>
<h1 id="2current-needs">2.Current Needs<a hidden class="anchor" aria-hidden="true" href="#2current-needs">#</a></h1>
<p>Azul can preheat in the simulation environment (simulate hotspot methods and loop bodies), then inject the results into the production environment, and compile directly using C2 to reduce the compilation time at runtime. This is very effective for scenarios such as securities industry quotations, because these scenarios require high-speed operation from the beginning.</p>
<p><img src="/images/en/jitwarmup/2-0.png"/><br></p>
<ol>
<li>Horizontal axis: the time when the JVM virtual machine reaches the best code performance;</li>
<li>Vertical axis: JVM’s best code performance degree or ratio;</li>
<li>Glitches: caused by de-optimization or garbage collection.</li>
</ol>
<h1 id="3question">3.Question<a hidden class="anchor" aria-hidden="true" href="#3question">#</a></h1>
<p>Azul can learn and train in a simulation environment, and then input the training result set as a reference into the production environment to achieve the peak effect at startup. And eliminate GC glitches.</p>
<h2 id="31current-issues">3.1.Current Issues<a hidden class="anchor" aria-hidden="true" href="#31current-issues">#</a></h2>
<p><img src="/images/en/jitwarmup/3-1.png"/><br></p>
<ol>
<li>Long startup time;</li>
<li>It takes a long time for the Java Virtual Machine to reach the optimal code performance of the Java Virtual Machine.</li>
</ol>
<h2 id="32desired-results">3.2.Desired Results<a hidden class="anchor" aria-hidden="true" href="#32desired-results">#</a></h2>
<p><img src="/images/en/jitwarmup/3-2.png"/><br></p>
<ol>
<li>Short startup time;</li>
<li>After startup, the Java virtual machine can quickly achieve optimal code performance.</li>
</ol>
<h2 id="33desired-goals">3.3.Desired Goals<a hidden class="anchor" aria-hidden="true" href="#33desired-goals">#</a></h2>
<ol>
<li>On the premise of ensuring the correct use of key functions, significantly reduce the time it takes to restart;</li>
<li>Eliminate glitches and enable the Java virtual machine to quickly achieve optimal code performance.</li>
</ol>
<h1 id="4problem-analysis">4.Problem Analysis<a hidden class="anchor" aria-hidden="true" href="#4problem-analysis">#</a></h1>
<h2 id="41what-are-the-current-plans-to-accelerate-the-start-up">4.1.What are the current plans to accelerate the start-up?<a hidden class="anchor" aria-hidden="true" href="#41what-are-the-current-plans-to-accelerate-the-start-up">#</a></h2>
<h3 id="411cds-class-data-sharing">4.1.1.CDS (Class Data Sharing)<a hidden class="anchor" aria-hidden="true" href="#411cds-class-data-sharing">#</a></h3>
<p><strong>Functional positioning:</strong>
Dump internal classes, application classes, dynamic (classes loaded by custom class loader and omit the dump classlist step) and other representations into files (class loader, jsa file);
Shared (CDS) on each JVM startup.
<strong>Insufficient:</strong>
No optimization or hotspot detection;
Only class loading time is reduced;
The startup speed is not significantly accelerated.</p>
<h3 id="412aot-ahead-of-time-compilation-compilation-in-advance-source-code-to-machine-code">4.1.2.AOT (Ahead Of Time Compilation, compilation in advance, source code to machine code)<a hidden class="anchor" aria-hidden="true" href="#412aot-ahead-of-time-compilation-compilation-in-advance-source-code-to-machine-code">#</a></h3>
<p><strong>Advantage:</strong>
&ldquo;Full speed&rdquo; from the start, GraalVM native images can do this;
By definition, AOT is static, code is compiled before running, and there is no overhead in compiling code at runtime;
Small memory footprint</p>
<p><strong>Insufficient:</strong>
Does not interpret bytecode;
There is no hotspot analysis;
There is no runtime compilation of code, so no runtime bytecode generation;
Limited use of method inlining;
Reflection is possible but complicated;
Cannot use speculative optimization (assuming conditions hold, such as array bounds)
Must be compiled for common characteristics (e.g. same name, same parameters, etc.)
Because optimization is not thorough, overall performance is usually lower;
Deploy the environment! = development environment.</p>
<h3 id="413jit-just-in-time-compilation-instant-compilation">4.1.3.JIT (Just In Time Compilation, instant compilation)<a hidden class="anchor" aria-hidden="true" href="#413jit-just-in-time-compilation-instant-compilation">#</a></h3>
<p><strong>advantage:</strong>
Aggressive method inlining can be used at runtime (for example, the number of method lines does not exceed 80 lines, aggressive refers to large methods, long compilation time, and large binary files)
Can be generated using runtime bytecode
Reflection is simple
Can speculative optimization be used? (assuming conditions hold, such as array bounds)
It can even be optimized for Haswell, Skylake, Ice Lake, and more. (CPU architecture)
Overall performance is usually higher
Deployment environment == development environment</p>
<p><strong>insufficient:</strong>
Takes more time to start (but will be faster)
There is an overhead in compiling code at runtime
Larger memory footprint</p>
<h2 id="42why-glitches-occur-the-existence-of-glitches-directly-affects-the-optimal-performance-of-the-java-virtual-machine">4.2.Why glitches occur (the existence of glitches directly affects the optimal performance of the Java virtual machine)？<a hidden class="anchor" aria-hidden="true" href="#42why-glitches-occur-the-existence-of-glitches-directly-affects-the-optimal-performance-of-the-java-virtual-machine">#</a></h2>
<h3 id="421de-optimization">4.2.1.De-optimization<a hidden class="anchor" aria-hidden="true" href="#421de-optimization">#</a></h3>
<p><img src="/images/en/jitwarmup/4-1.png"/><br></p>
<p>Although C2-compiled code is highly optimized and long-lived, it can also be de-optimized. As a result, the JVM will temporarily roll back to the interpreted state.
De-optimization occurs when the compiler&rsquo;s optimistic assumptions prove to be wrong - for example, when profile information does not match method behavior, the JVM de-optimizes compiled and inlined code as soon as the hot path changes .</p>
<h3 id="422there-are-gc-operations-before-reaching-optimal-performance">4.2.2.There are GC operations before reaching optimal performance<a hidden class="anchor" aria-hidden="true" href="#422there-are-gc-operations-before-reaching-optimal-performance">#</a></h3>
<h1 id="5solutions">5.Solutions<a hidden class="anchor" aria-hidden="true" href="#5solutions">#</a></h1>
<h2 id="51commercial-feeazul-prime-readynow">5.1.(Commercial fee)Azul Prime ReadyNow<a hidden class="anchor" aria-hidden="true" href="#51commercial-feeazul-prime-readynow">#</a></h2>
<h3 id="511what-is-azul-prime-readynow">5.1.1.What is Azul Prime ReadyNow?<a hidden class="anchor" aria-hidden="true" href="#511what-is-azul-prime-readynow">#</a></h3>
<p>ReadyNow is a feature of Azul Platform Prime that, when enabled, significantly improves application warm-up behavior.</p>
<p><img src="/images/en/jitwarmup/5-1.png"/><br></p>
<h3 id="512what-is-preheating">5.1.2.What is preheating?<a hidden class="anchor" aria-hidden="true" href="#512what-is-preheating">#</a></h3>
<p>Warm-up refers to the time required for a Java application to reach optimal performance. The just-in-time (JIT) compiler&rsquo;s job is to provide optimal performance by generating optimized compiled code from application bytecode. This process takes some time as the JIT compiler looks for optimization opportunities based on analysis of the application.</p>
<h3 id="513the-basic-idea">5.1.3.The basic idea<a hidden class="anchor" aria-hidden="true" href="#513the-basic-idea">#</a></h3>
<p>ReadyNow retains profiling information collected during an application&rsquo;s run so that subsequent runs do not have to learn from scratch again. Warming up improves the operation of each application until peak performance is achieved.</p>
<h3 id="514instructions">5.1.4.Instructions<a hidden class="anchor" aria-hidden="true" href="#514instructions">#</a></h3>
<p>To enable ReadyNow, add the following command line options, which are usually the same for both:
● -XX:ProfileLogIn= instructs Azul Platform Prime to use information from the existing profile log.
● -XX:ProfileLogOut= records previous compilation and runtime de-optimization decisions.
Running the application will automatically generate or update the profile log. This profile log will be used on subsequent runs of the application, improving warm-up.</p>
<h3 id="515integrated-development">5.1.5.Integrated development<a hidden class="anchor" aria-hidden="true" href="#515integrated-development">#</a></h3>
<p>Closed source</p>
<h2 id="52open-source-freecrac">5.2.(Open Source Free)CRaC<a hidden class="anchor" aria-hidden="true" href="#52open-source-freecrac">#</a></h2>
<h3 id="521what-is-crac">5.2.1.What is CRaC?<a hidden class="anchor" aria-hidden="true" href="#521what-is-crac">#</a></h3>
<p>Referenced to CRIU (Checkpoint Restore In Userspace, checkpoint recovery in user space)
The CRaC (Coordinated Restore at Checkpoint) project studies the coordination of Java programs and mechanisms for checkpointing (making mirrors and snapshots) of Java instances during execution. Restoring from an image can resolve some issues with boot and warm-up times. The main goal of this project is to develop a new mechanism-agnostic standard API to inform Java programs about checkpoint and recovery events. Other research activities will include, but are not limited to, integration with existing checkpoint/recovery mechanisms and the development of new mechanisms, changes to the JVM and JDK to shrink images and ensure they are correct.</p>
<h3 id="522the-basic-idea">5.2.2.The basic idea<a hidden class="anchor" aria-hidden="true" href="#522the-basic-idea">#</a></h3>
<p><img src="/images/en/jitwarmup/5-2.png"/><br></p>
<p>Input data (simulated request) to a Java application running in a specific (canary) environment (CPU, memory, I/O, operating system, etc.). When the input data reaches saturation (the requested path covers all use case), freeze the running application, output the checkpoint of the Java virtual machine to achieve optimal performance as a snapshot file and save it. Later, the application can be started through the previously saved image file (theoretically it can be a different physical machine).</p>
<h3 id="523deployment-process">5.2.3.Deployment process<a hidden class="anchor" aria-hidden="true" href="#523deployment-process">#</a></h3>
<p><img src="/images/en/jitwarmup/5-3.png"/><br></p>
<p>Initiate simulated requests to applications running in the canary environment, generate snapshot files when saturated requests are reached, and then restore the application through the snapshot files in the production environment.</p>
<h3 id="524instructions">5.2.4.Instructions<a hidden class="anchor" aria-hidden="true" href="#524instructions">#</a></h3>
<p>To enable CRaC, add the following command line options, which are usually the same for both:
● -XX:CRaCRestoreFrom=cr instructs the JDK to use the information in the existing configuration file log.
● -XX:CRaCCheckpointTo=cr records previous compilation and running de-optimization decisions.</p>
<h3 id="525integrated-development">5.2.5.Integrated development<a hidden class="anchor" aria-hidden="true" href="#525integrated-development">#</a></h3>
<h4 id="5251get-source-code">5.2.5.1.Get source code<a hidden class="anchor" aria-hidden="true" href="#5251get-source-code">#</a></h4>
<pre tabindex="0"><code>git clone https://github.com/openjdk/crac.git -b {tag}
</code></pre><h4 id="5252manual-compilation">5.2.5.2.Manual compilation<a hidden class="anchor" aria-hidden="true" href="#5252manual-compilation">#</a></h4>
<pre tabindex="0"><code>bash configure
make images
mv build/linux-x86_64-server-release/images/jdk/ .
</code></pre><h4 id="5253download-the-compatible-criu">5.2.5.3.Download the compatible CRIU<a hidden class="anchor" aria-hidden="true" href="#5253download-the-compatible-criu">#</a></h4>
<p><a href="https://github.com/CRaC/criu/releases/tag/release-1.4">CRIU</a></p>
<h4 id="5253extract-and-copy-the-criu-binary-on-the-same-named-file-in-the-jdk">5.2.5.3.Extract and copy the criu binary on the same named file in the JDK<a hidden class="anchor" aria-hidden="true" href="#5253extract-and-copy-the-criu-binary-on-the-same-named-file-in-the-jdk">#</a></h4>
<pre tabindex="0"><code>cp criu-dist/sbin/criu jdk/lib/criu
</code></pre><h4 id="5254execute-authorization">5.2.5.4.Execute authorization<a hidden class="anchor" aria-hidden="true" href="#5254execute-authorization">#</a></h4>
<pre tabindex="0"><code>sudo chown root:root jdk/lib/criu
sudo chmod u+s jdk/lib/criu
</code></pre><h1 id="6verify">6.Verify<a hidden class="anchor" aria-hidden="true" href="#6verify">#</a></h1>
<h2 id="61official-verification">6.1.Official verification<a hidden class="anchor" aria-hidden="true" href="#61official-verification">#</a></h2>
<h3 id="611verification-environment">6.1.1.Verification environment<a hidden class="anchor" aria-hidden="true" href="#611verification-environment">#</a></h3>
<p>Laptop (Intel i7-5500U, 16Gb RAM and SSD.)
Operating system kernel (Linux kernel 5.7.4-arch1-1)
Operating system (ubuntu:18.04 based image)
Platform: archlinux</p>
<h3 id="612verification-scenario">6.1.2.Verification scenario<a hidden class="anchor" aria-hidden="true" href="#612verification-scenario">#</a></h3>
<h4 id="6121scenario-1-time-to-first-operation">6.1.2.1.Scenario 1: Time To First Operation<a hidden class="anchor" aria-hidden="true" href="#6121scenario-1-time-to-first-operation">#</a></h4>
<p><img src="/images/en/jitwarmup/6-1.png"/><br></p>
<p><img src="/images/en/jitwarmup/6-2.png"/><br></p>
<h4 id="6122scenario-2-time-to-complete-n-operationssprint-bootopenjdk-onoff-crac">6.1.2.2.Scenario 2: Time to Complete N operations:sprint-boot(OpenJDK ON/OFF CRaC)<a hidden class="anchor" aria-hidden="true" href="#6122scenario-2-time-to-complete-n-operationssprint-bootopenjdk-onoff-crac">#</a></h4>
<p><img src="/images/en/jitwarmup/6-3.png"/><br></p>
<h4 id="6123scenario-3-time-to-complete-n-operationsquarkusopenjdk-onoff-crac">6.1.2.3.Scenario 3: Time to Complete N operations:quarkus(OpenJDK ON/OFF CRaC)<a hidden class="anchor" aria-hidden="true" href="#6123scenario-3-time-to-complete-n-operationsquarkusopenjdk-onoff-crac">#</a></h4>
<p><img src="/images/en/jitwarmup/6-4.png"/><br></p>
<h4 id="6124scenario-4-time-to-complete-n-operationsmicronautopenjdk-onoff-crac">6.1.2.4.Scenario 4: Time to Complete N operations:micronaut(OpenJDK ON/OFF CRaC)<a hidden class="anchor" aria-hidden="true" href="#6124scenario-4-time-to-complete-n-operationsmicronautopenjdk-onoff-crac">#</a></h4>
<p><img src="/images/en/jitwarmup/6-5.png"/><br></p>
<h2 id="62local-verification">6.2.Local verification<a hidden class="anchor" aria-hidden="true" href="#62local-verification">#</a></h2>
<h3 id="621verification-environment">6.2.1.Verification environment<a hidden class="anchor" aria-hidden="true" href="#621verification-environment">#</a></h3>
<p>Laptop (3.1 GHz Intel Core i5, 4Gb RAM and 50Gb SSD.)
Operating system kernel (3.10.0-1160.102.1.el7.x86_64)
Operating system (CentOS:7.9 VM)
Platform: x86_64</p>
<h3 id="622verification-scenario">6.2.2.Verification scenario<a hidden class="anchor" aria-hidden="true" href="#622verification-scenario">#</a></h3>
<h4 id="6221scenario-1-time-of-first-operation">6.2.2.1.Scenario 1: Time Of First Operation<a hidden class="anchor" aria-hidden="true" href="#6221scenario-1-time-of-first-operation">#</a></h4>
<p><img src="/images/en/jitwarmup/6-6.png"/><br></p>
<p><img src="/images/en/jitwarmup/6-7.png"/><br></p>
<h4 id="6222scenario-2-time-to-complete-100000-operations">6.2.2.2.Scenario 2: Time To Complete 100000 Operations<a hidden class="anchor" aria-hidden="true" href="#6222scenario-2-time-to-complete-100000-operations">#</a></h4>
<p><img src="/images/en/jitwarmup/6-8.png"/><br></p>


  </div>

  <footer class="post-footer">
    <ul class="post-tags">
      <li><a href="https://xiaotaonan.github.io/tags/jit/">JIT</a></li>
      <li><a href="https://xiaotaonan.github.io/tags/crac/">CRaC</a></li>
      <li><a href="https://xiaotaonan.github.io/tags/aot/">AOT</a></li>
      <li><a href="https://xiaotaonan.github.io/tags/warmup/">WarmUp</a></li>
      <li><a href="https://xiaotaonan.github.io/tags/graal/">Graal</a></li>
    </ul>
<nav class="paginav">
  <a class="prev" href="https://xiaotaonan.github.io/posts/crac41/">
    <span class="title">« Prev</span>
    <br>
    <span>JIT and Tuning Warm-up</span>
  </a>
</nav>


<ul class="share-buttons">
    <li>
        <a target="_blank" rel="noopener noreferrer" aria-label="share JIT and Tuning Warm-up on x"
            href="https://x.com/intent/tweet/?text=JIT%20and%20Tuning%20Warm-up&amp;url=https%3a%2f%2fxiaotaonan.github.io%2fposts%2fjit-warmstartup%2f&amp;hashtags=JIT%2cCRaC%2cAOT%2cWarmUp%2cGraal">
            <svg version="1.1" viewBox="0 0 512 512" xml:space="preserve" height="30px" width="30px" fill="currentColor">
                <path
                    d="M512 62.554 L 512 449.446 C 512 483.97 483.97 512 449.446 512 L 62.554 512 C 28.03 512 0 483.97 0 449.446 L 0 62.554 C 0 28.03 28.029 0 62.554 0 L 449.446 0 C 483.971 0 512 28.03 512 62.554 Z M 269.951 190.75 L 182.567 75.216 L 56 75.216 L 207.216 272.95 L 63.9 436.783 L 125.266 436.783 L 235.9 310.383 L 332.567 436.783 L 456 436.783 L 298.367 228.367 L 432.367 75.216 L 371.033 75.216 Z M 127.633 110 L 164.101 110 L 383.481 400.065 L 349.5 400.065 Z" />
            </svg>
        </a>
    </li>
    <li>
        <a target="_blank" rel="noopener noreferrer" aria-label="share JIT and Tuning Warm-up on linkedin"
            href="https://www.linkedin.com/shareArticle?mini=true&amp;url=https%3a%2f%2fxiaotaonan.github.io%2fposts%2fjit-warmstartup%2f&amp;title=JIT%20and%20Tuning%20Warm-up&amp;summary=JIT%20and%20Tuning%20Warm-up&amp;source=https%3a%2f%2fxiaotaonan.github.io%2fposts%2fjit-warmstartup%2f">
            <svg version="1.1" viewBox="0 0 512 512" xml:space="preserve" height="30px" width="30px" fill="currentColor">
                <path
                    d="M449.446,0c34.525,0 62.554,28.03 62.554,62.554l0,386.892c0,34.524 -28.03,62.554 -62.554,62.554l-386.892,0c-34.524,0 -62.554,-28.03 -62.554,-62.554l0,-386.892c0,-34.524 28.029,-62.554 62.554,-62.554l386.892,0Zm-288.985,423.278l0,-225.717l-75.04,0l0,225.717l75.04,0Zm270.539,0l0,-129.439c0,-69.333 -37.018,-101.586 -86.381,-101.586c-39.804,0 -57.634,21.891 -67.617,37.266l0,-31.958l-75.021,0c0.995,21.181 0,225.717 0,225.717l75.02,0l0,-126.056c0,-6.748 0.486,-13.492 2.474,-18.315c5.414,-13.475 17.767,-27.434 38.494,-27.434c27.135,0 38.007,20.707 38.007,51.037l0,120.768l75.024,0Zm-307.552,-334.556c-25.674,0 -42.448,16.879 -42.448,39.002c0,21.658 16.264,39.002 41.455,39.002l0.484,0c26.165,0 42.452,-17.344 42.452,-39.002c-0.485,-22.092 -16.241,-38.954 -41.943,-39.002Z" />
            </svg>
        </a>
    </li>
    <li>
        <a target="_blank" rel="noopener noreferrer" aria-label="share JIT and Tuning Warm-up on reddit"
            href="https://reddit.com/submit?url=https%3a%2f%2fxiaotaonan.github.io%2fposts%2fjit-warmstartup%2f&title=JIT%20and%20Tuning%20Warm-up">
            <svg version="1.1" viewBox="0 0 512 512" xml:space="preserve" height="30px" width="30px" fill="currentColor">
                <path
                    d="M449.446,0c34.525,0 62.554,28.03 62.554,62.554l0,386.892c0,34.524 -28.03,62.554 -62.554,62.554l-386.892,0c-34.524,0 -62.554,-28.03 -62.554,-62.554l0,-386.892c0,-34.524 28.029,-62.554 62.554,-62.554l386.892,0Zm-3.446,265.638c0,-22.964 -18.616,-41.58 -41.58,-41.58c-11.211,0 -21.361,4.457 -28.841,11.666c-28.424,-20.508 -67.586,-33.757 -111.204,-35.278l18.941,-89.121l61.884,13.157c0.756,15.734 13.642,28.29 29.56,28.29c16.407,0 29.706,-13.299 29.706,-29.701c0,-16.403 -13.299,-29.702 -29.706,-29.702c-11.666,0 -21.657,6.792 -26.515,16.578l-69.105,-14.69c-1.922,-0.418 -3.939,-0.042 -5.585,1.036c-1.658,1.073 -2.811,2.761 -3.224,4.686l-21.152,99.438c-44.258,1.228 -84.046,14.494 -112.837,35.232c-7.468,-7.164 -17.589,-11.591 -28.757,-11.591c-22.965,0 -41.585,18.616 -41.585,41.58c0,16.896 10.095,31.41 24.568,37.918c-0.639,4.135 -0.99,8.328 -0.99,12.576c0,63.977 74.469,115.836 166.33,115.836c91.861,0 166.334,-51.859 166.334,-115.836c0,-4.218 -0.347,-8.387 -0.977,-12.493c14.564,-6.47 24.735,-21.034 24.735,-38.001Zm-119.474,108.193c-20.27,20.241 -59.115,21.816 -70.534,21.816c-11.428,0 -50.277,-1.575 -70.522,-21.82c-3.007,-3.008 -3.007,-7.882 0,-10.889c3.003,-2.999 7.882,-3.003 10.885,0c12.777,12.781 40.11,17.317 59.637,17.317c19.522,0 46.86,-4.536 59.657,-17.321c3.016,-2.999 7.886,-2.995 10.885,0.008c3.008,3.011 3.003,7.882 -0.008,10.889Zm-5.23,-48.781c-16.373,0 -29.701,-13.324 -29.701,-29.698c0,-16.381 13.328,-29.714 29.701,-29.714c16.378,0 29.706,13.333 29.706,29.714c0,16.374 -13.328,29.698 -29.706,29.698Zm-160.386,-29.702c0,-16.381 13.328,-29.71 29.714,-29.71c16.369,0 29.689,13.329 29.689,29.71c0,16.373 -13.32,29.693 -29.689,29.693c-16.386,0 -29.714,-13.32 -29.714,-29.693Z" />
            </svg>
        </a>
    </li>
    <li>
        <a target="_blank" rel="noopener noreferrer" aria-label="share JIT and Tuning Warm-up on facebook"
            href="https://facebook.com/sharer/sharer.php?u=https%3a%2f%2fxiaotaonan.github.io%2fposts%2fjit-warmstartup%2f">
            <svg version="1.1" viewBox="0 0 512 512" xml:space="preserve" height="30px" width="30px" fill="currentColor">
                <path
                    d="M449.446,0c34.525,0 62.554,28.03 62.554,62.554l0,386.892c0,34.524 -28.03,62.554 -62.554,62.554l-106.468,0l0,-192.915l66.6,0l12.672,-82.621l-79.272,0l0,-53.617c0,-22.603 11.073,-44.636 46.58,-44.636l36.042,0l0,-70.34c0,0 -32.71,-5.582 -63.982,-5.582c-65.288,0 -107.96,39.569 -107.96,111.204l0,62.971l-72.573,0l0,82.621l72.573,0l0,192.915l-191.104,0c-34.524,0 -62.554,-28.03 -62.554,-62.554l0,-386.892c0,-34.524 28.029,-62.554 62.554,-62.554l386.892,0Z" />
            </svg>
        </a>
    </li>
    <li>
        <a target="_blank" rel="noopener noreferrer" aria-label="share JIT and Tuning Warm-up on whatsapp"
            href="https://api.whatsapp.com/send?text=JIT%20and%20Tuning%20Warm-up%20-%20https%3a%2f%2fxiaotaonan.github.io%2fposts%2fjit-warmstartup%2f">
            <svg version="1.1" viewBox="0 0 512 512" xml:space="preserve" height="30px" width="30px" fill="currentColor">
                <path
                    d="M449.446,0c34.525,0 62.554,28.03 62.554,62.554l0,386.892c0,34.524 -28.03,62.554 -62.554,62.554l-386.892,0c-34.524,0 -62.554,-28.03 -62.554,-62.554l0,-386.892c0,-34.524 28.029,-62.554 62.554,-62.554l386.892,0Zm-58.673,127.703c-33.842,-33.881 -78.847,-52.548 -126.798,-52.568c-98.799,0 -179.21,80.405 -179.249,179.234c-0.013,31.593 8.241,62.428 23.927,89.612l-25.429,92.884l95.021,-24.925c26.181,14.28 55.659,21.807 85.658,21.816l0.074,0c98.789,0 179.206,-80.413 179.247,-179.243c0.018,-47.895 -18.61,-92.93 -52.451,-126.81Zm-126.797,275.782l-0.06,0c-26.734,-0.01 -52.954,-7.193 -75.828,-20.767l-5.441,-3.229l-56.386,14.792l15.05,-54.977l-3.542,-5.637c-14.913,-23.72 -22.791,-51.136 -22.779,-79.287c0.033,-82.142 66.867,-148.971 149.046,-148.971c39.793,0.014 77.199,15.531 105.329,43.692c28.128,28.16 43.609,65.592 43.594,105.4c-0.034,82.149 -66.866,148.983 -148.983,148.984Zm81.721,-111.581c-4.479,-2.242 -26.499,-13.075 -30.604,-14.571c-4.105,-1.495 -7.091,-2.241 -10.077,2.241c-2.986,4.483 -11.569,14.572 -14.182,17.562c-2.612,2.988 -5.225,3.364 -9.703,1.12c-4.479,-2.241 -18.91,-6.97 -36.017,-22.23c-13.314,-11.876 -22.304,-26.542 -24.916,-31.026c-2.612,-4.484 -0.279,-6.908 1.963,-9.14c2.016,-2.007 4.48,-5.232 6.719,-7.847c2.24,-2.615 2.986,-4.484 4.479,-7.472c1.493,-2.99 0.747,-5.604 -0.374,-7.846c-1.119,-2.241 -10.077,-24.288 -13.809,-33.256c-3.635,-8.733 -7.327,-7.55 -10.077,-7.688c-2.609,-0.13 -5.598,-0.158 -8.583,-0.158c-2.986,0 -7.839,1.121 -11.944,5.604c-4.105,4.484 -15.675,15.32 -15.675,37.364c0,22.046 16.048,43.342 18.287,46.332c2.24,2.99 31.582,48.227 76.511,67.627c10.685,4.615 19.028,7.371 25.533,9.434c10.728,3.41 20.492,2.929 28.209,1.775c8.605,-1.285 26.499,-10.833 30.231,-21.295c3.732,-10.464 3.732,-19.431 2.612,-21.298c-1.119,-1.869 -4.105,-2.99 -8.583,-5.232Z" />
            </svg>
        </a>
    </li>
    <li>
        <a target="_blank" rel="noopener noreferrer" aria-label="share JIT and Tuning Warm-up on telegram"
            href="https://telegram.me/share/url?text=JIT%20and%20Tuning%20Warm-up&amp;url=https%3a%2f%2fxiaotaonan.github.io%2fposts%2fjit-warmstartup%2f">
            <svg version="1.1" xml:space="preserve" viewBox="2 2 28 28" height="30px" width="30px" fill="currentColor">
                <path
                    d="M26.49,29.86H5.5a3.37,3.37,0,0,1-2.47-1,3.35,3.35,0,0,1-1-2.47V5.48A3.36,3.36,0,0,1,3,3,3.37,3.37,0,0,1,5.5,2h21A3.38,3.38,0,0,1,29,3a3.36,3.36,0,0,1,1,2.46V26.37a3.35,3.35,0,0,1-1,2.47A3.38,3.38,0,0,1,26.49,29.86Zm-5.38-6.71a.79.79,0,0,0,.85-.66L24.73,9.24a.55.55,0,0,0-.18-.46.62.62,0,0,0-.41-.17q-.08,0-16.53,6.11a.59.59,0,0,0-.41.59.57.57,0,0,0,.43.52l4,1.24,1.61,4.83a.62.62,0,0,0,.63.43.56.56,0,0,0,.4-.17L16.54,20l4.09,3A.9.9,0,0,0,21.11,23.15ZM13.8,20.71l-1.21-4q8.72-5.55,8.78-5.55c.15,0,.23,0,.23.16a.18.18,0,0,1,0,.06s-2.51,2.3-7.52,6.8Z" />
            </svg>
        </a>
    </li>
    <li>
        <a target="_blank" rel="noopener noreferrer" aria-label="share JIT and Tuning Warm-up on ycombinator"
            href="https://news.ycombinator.com/submitlink?t=JIT%20and%20Tuning%20Warm-up&u=https%3a%2f%2fxiaotaonan.github.io%2fposts%2fjit-warmstartup%2f">
            <svg version="1.1" xml:space="preserve" width="30px" height="30px" viewBox="0 0 512 512" fill="currentColor"
                xmlns:inkscape="http://www.inkscape.org/namespaces/inkscape">
                <path
                    d="M449.446 0C483.971 0 512 28.03 512 62.554L512 449.446C512 483.97 483.97 512 449.446 512L62.554 512C28.03 512 0 483.97 0 449.446L0 62.554C0 28.03 28.029 0 62.554 0L449.446 0ZM183.8767 87.9921H121.8427L230.6673 292.4508V424.0079H281.3328V292.4508L390.1575 87.9921H328.1233L256 238.2489z" />
            </svg>
        </a>
    </li>
</ul>

  </footer>
</article>
    </main>
    
<footer class="footer">
    <span>&copy; 2024 <a href="https://xiaotaonan.github.io/">Blog</a></span>
    <span>
        Powered by
        <a href="https://gohugo.io/" rel="noopener noreferrer" target="_blank">Hugo</a> &
        <a href="https://github.com/adityatelange/hugo-PaperMod/" rel="noopener" target="_blank">PaperMod</a>
    </span>
</footer>
<a href="#top" aria-label="go to top" title="Go to Top (Alt + G)" class="top-link" id="top-link" accesskey="g">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentColor">
        <path d="M12 6H0l6-6z" />
    </svg>
</a>

<script>
    let menu = document.getElementById('menu')
    if (menu) {
        menu.scrollLeft = localStorage.getItem("menu-scroll-position");
        menu.onscroll = function () {
            localStorage.setItem("menu-scroll-position", menu.scrollLeft);
        }
    }

    document.querySelectorAll('a[href^="#"]').forEach(anchor => {
        anchor.addEventListener("click", function (e) {
            e.preventDefault();
            var id = this.getAttribute("href").substr(1);
            if (!window.matchMedia('(prefers-reduced-motion: reduce)').matches) {
                document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView({
                    behavior: "smooth"
                });
            } else {
                document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView();
            }
            if (id === "top") {
                history.replaceState(null, null, " ");
            } else {
                history.pushState(null, null, `#${id}`);
            }
        });
    });

</script>
<script>
    var mybutton = document.getElementById("top-link");
    window.onscroll = function () {
        if (document.body.scrollTop > 800 || document.documentElement.scrollTop > 800) {
            mybutton.style.visibility = "visible";
            mybutton.style.opacity = "1";
        } else {
            mybutton.style.visibility = "hidden";
            mybutton.style.opacity = "0";
        }
    };

</script>
<script>
    document.getElementById("theme-toggle").addEventListener("click", () => {
        if (document.body.className.includes("dark")) {
            document.body.classList.remove('dark');
            localStorage.setItem("pref-theme", 'light');
        } else {
            document.body.classList.add('dark');
            localStorage.setItem("pref-theme", 'dark');
        }
    })

</script>
<script>
    document.querySelectorAll('pre > code').forEach((codeblock) => {
        const container = codeblock.parentNode.parentNode;

        const copybutton = document.createElement('button');
        copybutton.classList.add('copy-code');
        copybutton.innerHTML = 'copy';

        function copyingDone() {
            copybutton.innerHTML = 'copied!';
            setTimeout(() => {
                copybutton.innerHTML = 'copy';
            }, 2000);
        }

        copybutton.addEventListener('click', (cb) => {
            if ('clipboard' in navigator) {
                navigator.clipboard.writeText(codeblock.textContent);
                copyingDone();
                return;
            }

            const range = document.createRange();
            range.selectNodeContents(codeblock);
            const selection = window.getSelection();
            selection.removeAllRanges();
            selection.addRange(range);
            try {
                document.execCommand('copy');
                copyingDone();
            } catch (e) { };
            selection.removeRange(range);
        });

        if (container.classList.contains("highlight")) {
            container.appendChild(copybutton);
        } else if (container.parentNode.firstChild == container) {
            
        } else if (codeblock.parentNode.parentNode.parentNode.parentNode.parentNode.nodeName == "TABLE") {
            
            codeblock.parentNode.parentNode.parentNode.parentNode.parentNode.appendChild(copybutton);
        } else {
            
            codeblock.parentNode.appendChild(copybutton);
        }
    });
</script>
</body>

</html>
